(window.webpackJsonpprojects=window.webpackJsonpprojects||[]).push([[0],{111:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(19),c=r(27),i=r(13),l=r(34),s=r.n(l),u=r(26),p="https://test-task-server.herokuapp.com/api/v1/",m=s.a.mark(E),d=s.a.mark(O),f={API_ALL_CATEGORIES:p+"category/all",API_CREATE_CATEGORY:p+"category/create",API_EDIT_CATEGORY:p+"category/update",API_DELETE_CATEGORY:p+"category/"};function E(e){var t,r,n,a,o,c,i=arguments;return s.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return t=i.length>1&&void 0!==i[1]?i[1]:"GET",r=i.length>2&&void 0!==i[2]?i[2]:[],n=i.length>3&&void 0!==i[3]?i[3]:"",l.prev=3,a={method:t,headers:{"Content-Type":"application/json"}},"GET"!==t&&"HEAD"!==t&&(a.body=JSON.stringify(r)),l.next=8,fetch(f["API_"+e]+n,a);case 8:return o=l.sent,l.next=11,o.json();case 11:return c=l.sent,l.next=14,Object(u.b)({type:e+"_RECEIVED",ok:o.ok,json:c,params:r,urlSuffix:n});case 14:l.next=20;break;case 16:return l.prev=16,l.t0=l.catch(3),l.next=20,Object(u.b)({type:"SERVER_ERROR",err:l.t0});case 20:case"end":return l.stop()}},m,null,[[3,16]])}function O(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.a)([Object(u.c)("GET_ALL_CATEGORIES",function(){return E("ALL_CATEGORIES","GET")}),Object(u.c)("CREATE_CATEGORY",function(e){return E("CREATE_CATEGORY","POST",e.params)}),Object(u.c)("EDIT_CATEGORY",function(e){return E("EDIT_CATEGORY","PUT",e.params)}),Object(u.c)("DELETE_CATEGORY",function(e){return E("DELETE_CATEGORY","DELETE",[],e.params._id)})]);case 2:case"end":return e.stop()}},d)}var b=r(69),h=r(45),y=r(23);function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=[];return 0===r&&n.push({key:"",value:"-"}),e.filter(function(e){return e.parentId===t}).sort(function(e,t){return e.title.localeCompare(t.title)}).map(function(t){for(var a=t.title,o=0;o<r;o++)a="    "+a;return n.push({key:t._id,value:a,level:r}),n=n.concat(g(e,t._id,r+1)),!0}),n}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=[t];return g(e,t,1).map(function(e){return r.push(e.key),!0}),e.filter(function(e){return-1===r.indexOf(e._id)})}function j(e){var t={};return e.map(function(e){return t[e.param]=e.message,!0}),t}function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(r,!0).forEach(function(t){Object(y.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ALL_CATEGORIES":return _({},e,{categories:void 0,loading:!0});case"ALL_CATEGORIES_RECEIVED":return _({},e,{categoriesOk:t.ok,categories:t.json,loading:!1,errorGlobal:!1});case"CREATE_CATEGORY":return _({},e,{currentFormErrors:void 0});case"CREATE_CATEGORY_RECEIVED":if(t.ok){var r=Object(h.a)(e.categories);r.push(t.json);var n=_({},e.modalData);return n.show=!1,_({},e,{categories:r,modalData:n,currentFormErrors:void 0})}return _({},e,{currentFormErrors:j(t.json)});case"EDIT_CATEGORY":return _({},e,{currentFormErrors:void 0});case"EDIT_CATEGORY_RECEIVED":if(t.ok){var a=Object(h.a)(e.categories).filter(function(e){return e._id!==t.json._id});a.push(t.json);var o=_({},e.modalData);return o.show=!1,_({},e,{categories:a,modalData:o,currentFormErrors:void 0})}return _({},e,{currentFormErrors:j(t.json)});case"DELETE_CATEGORY_RECEIVED":var c=_({},e.modalData);return c.show=!1,t.ok?_({},e,{categories:v(e.categories,t.urlSuffix),modalData:c,errorGlobal:!1}):_({},e,{modalData:c,errorGlobal:!0,errorGlobalMsg:t.json[0].message});case"SERVER_ERROR":return _({},e,{loading:!1,errorGlobal:!0,errorGlobalMsg:t.err.toString()});case"UPDATE_FORM_ITEM":if(null===t.itemData)return _({},e,{currentFormValues:void 0});var i=_({},e.currentFormValues);return i[t.itemData.name]=t.itemData.value,_({},e,{currentFormValues:i});case"HIDE_MODAL":var l=_({},e.modalData);return l.show=!1,_({},e,{modalData:l});case"INIT_MODAL":return _({},e,{modalData:t.modalData,currentFormErrors:void 0});default:return e}},D=r(7),A=r(8),R=r(10),k=r(9),I=r(11),x=r(37),G=r(25),w=function(e){function t(){return Object(D.a)(this,t),Object(R.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){return a.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark static-top"},a.a.createElement("div",{className:"container"},a.a.createElement("ul",{className:"navbar-nav"},[{to:"/",exact:!0,icon:"home",text:"Home"},{to:"/manage_categories",icon:"sitemap",text:"Categories"},{to:"/manage_recipes",icon:"cutlery",text:"Recipes"},{to:"/manage_articles",icon:"file-text-o",text:"Articles"}].map(function(e){return a.a.createElement("li",{className:"nav-item",key:"header_url_to_"+e.to},a.a.createElement(x.b,{className:"nav-link",exact:e.exact,to:e.to,activeClassName:"active"},a.a.createElement("i",{className:"fa fa-"+e.icon})," ",e.text))}))))}}]),t}(n.Component),F=(r(81),function(e){return e.loading?a.a.createElement("div",{className:"loader"},"Loading..."):null}),P=F=Object(i.b)(function(e){return{loading:e.loading}},null)(F);function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(r,!0).forEach(function(t){Object(y.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var L=function(e){return{type:"INIT_MODAL",modalData:S({},e,{show:!0})}},N=r(24),V=r.n(N),B=function(e){function t(e){var r;Object(D.a)(this,t),r=Object(R.a)(this,Object(k.a)(t).call(this,e));var n={};return r.props.updateFormItem(null),r.props.items.map(function(e){var t=void 0!==r.props.values[e.name]?r.props.values[e.name]:e.default;return r.props.updateFormItem({name:e.name,value:t}),n[e.name]=null===t?"":t,!0}),r.state=n,r}return Object(I.a)(t,e),Object(A.a)(t,[{key:"onChange",value:function(e,t){this.props.updateFormItem({name:e,value:t.target.value}),this.setState(Object(y.a)({},e,t.target.value))}},{key:"render",value:function(){var e=this;return a.a.createElement(a.a.Fragment,null,this.props.items.map(function(t){var r={id:"form_input_"+t.name,className:"form-control",name:t.name,value:e.state[t.name],onChange:function(r){return e.onChange(t.name,r)}};return"hidden"===t.type?a.a.createElement("input",Object.assign({key:"form_"+t.name,type:"hidden"},r)):a.a.createElement("div",{className:"form-group",key:"form_"+t.name},a.a.createElement("label",{htmlFor:"form_input_"+t.name},t.required&&a.a.createElement("span",{className:"font-weight-bold text-danger"},"*")," ",t.title),void 0!==e.props.currentFormErrors[t.name]&&a.a.createElement("div",{className:"text-danger"},e.props.currentFormErrors[t.name]),function(){switch(t.type){case"select":return a.a.createElement("select",r,void 0!==e.props.selectOptions[t.name]&&e.props.selectOptions[t.name].map(function(e){return a.a.createElement("option",{key:"form_select_"+t.name+e.key,value:e.key},e.value.replace(/ /g,"\xa0"))}));case"textarea":return a.a.createElement("textarea",r);default:return a.a.createElement("input",Object.assign({type:"text"},r))}}())}))}}]),t}(n.Component);B.defaultProps={items:[],values:[],selectOptions:[],onSubmit:null,currentFormErrors:{}};var Y={updateFormItem:function(e){return{type:"UPDATE_FORM_ITEM",itemData:e}}},H=B=Object(i.b)(function(e){return{currentFormValues:e.currentFormValues,currentFormErrors:e.currentFormErrors}},Y)(B),q={items:[{title:"Parent Category",name:"parentId",type:"select",required:!1,default:""},{title:"Name",name:"title",type:"text",required:!0,default:""}]},z={items:[{title:"Parent Category",name:"parentId",type:"select",required:!1,default:""},{title:"Name",name:"title",type:"text",required:!0,default:""},{title:"",name:"_id",type:"hidden",default:""}]},J=function(e){function t(){return Object(D.a)(this,t),Object(R.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(A.a)(t,[{key:"initEditModal",value:function(e){var t=this;this.props.initModal({titleText:"Edit category",isForm:!0,bodyText:a.a.createElement(H,Object.assign({},z,{values:this.props.items.find(function(t){return t._id===e}),selectOptions:{parentId:g(this.props.items)}})),closeBtnText:"Cancel",confirmBtnText:"Edit",closeBtnVariant:"secondary",confirmBtnVariant:"success",confirmAddData:{type:"EDIT_CATEGORY",_id:e},closeHandler:function(e){e.hideModal()},formSubmitHandler:function(e,r){t.props.editCategory(r.currentFormValues),e.preventDefault()}})}},{key:"initDeleteModal",value:function(e){var t=this;this.props.initModal({titleText:"Delete category",bodyText:"Are you sure?",closeBtnText:"Cancel",confirmBtnText:"Delete",closeBtnVariant:"secondary",confirmBtnVariant:"danger",confirmAddData:{type:"DELETE_CATEGORY",_id:e},closeHandler:function(e){e.hideModal()},confirmHandler:function(e){t.props.deleteCategory(e.confirmAddData._id)}})}},{key:"render",value:function(){var e=this;return a.a.createElement("ul",null,void 0!==this.props.items?this.props.items.filter(function(t){return t.parentId===e.props.parentId}).sort(function(e,t){return e.title.localeCompare(t.title)}).map(function(r){return a.a.createElement("li",{key:r._id},r.title,a.a.createElement(V.a,{variant:"secondary",size:"sm",className:"ml-2 m-1",onClick:function(){e.initEditModal(r._id)}},a.a.createElement("i",{className:"fa fa-pencil"})),a.a.createElement(V.a,{variant:"danger",size:"sm",className:"m-1",onClick:function(){e.initDeleteModal(r._id)}},a.a.createElement("i",{className:"fa fa-trash"})),a.a.createElement(t,{key:"sub_"+r._id,items:e.props.items,parentId:r._id,initModal:e.props.initModal,editCategory:e.props.editCategory,deleteCategory:e.props.deleteCategory}))}):"")}}]),t}(n.Component);J.defaultProps={parentId:null};var U={initModal:L,deleteCategory:function(e){return{type:"DELETE_CATEGORY",params:{_id:e}}},editCategory:function(e){var t=S({},e);return""===t.parentId&&(t.parentId=null),{type:"EDIT_CATEGORY",params:t}}},W=J=Object(i.b)(null,U)(J),K=function(e){function t(){return Object(D.a)(this,t),Object(R.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(A.a)(t,[{key:"initAddModal",value:function(){var e=this;this.props.initModal({titleText:"Add new category",isForm:!0,bodyText:a.a.createElement(H,Object.assign({},q,{selectOptions:{parentId:g(this.props.categories)}})),closeBtnText:"Cancel",confirmBtnText:"Add",closeBtnVariant:"secondary",confirmBtnVariant:"success",confirmAddData:{type:"ADD_CATEGORY"},closeHandler:function(e){e.hideModal()},formSubmitHandler:function(t,r){e.props.createCategory(r.currentFormValues),t.preventDefault()}})}},{key:"componentDidMount",value:function(){this.props.getAllCategories()}},{key:"render",value:function(){var e=this;return a.a.createElement(a.a.Fragment,null,a.a.createElement("h3",{className:"mb-3"},"Manage Categories"),a.a.createElement(P,null),void 0!==this.props.categories&&!this.props.loading&&a.a.createElement(a.a.Fragment,null,a.a.createElement(V.a,{variant:"secondary",size:"sm",className:"m-1 mb-3",onClick:function(){e.initAddModal()}},a.a.createElement("i",{className:"fa fa-plus"})," Add category"),a.a.createElement(W,{items:this.props.categories})))}}]),t}(n.Component),Q={getAllCategories:function(){return{type:"GET_ALL_CATEGORIES"}},createCategory:function(e){var t=S({},e);return""===t.parentId&&(t.parentId=null),{type:"CREATE_CATEGORY",params:t}},initModal:L},X=K=Object(i.b)(function(e){return{categories:e.categories,loading:e.loading}},Q)(K),Z=function(e){function t(){return Object(D.a)(this,t),Object(R.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){return a.a.createElement("span",null,a.a.createElement("h3",null,"Manage Recipes"),a.a.createElement(P,null))}}]),t}(n.Component),$=r(29),ee=r.n($);function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var re=function(e){function t(){return Object(D.a)(this,t),Object(R.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=a.a.createElement(a.a.Fragment,null,a.a.createElement(ee.a.Header,{closeButton:!0},a.a.createElement(ee.a.Title,null,this.props.titleText)),a.a.createElement(ee.a.Body,null,this.props.bodyText),a.a.createElement(ee.a.Footer,null,a.a.createElement(V.a,{variant:this.props.closeBtnVariant,onClick:function(){return e.props.closeHandler(e.props)}},this.props.closeBtnText),a.a.createElement(V.a,{variant:this.props.confirmBtnVariant,onClick:function(){return e.props.confirmHandler(e.props)},type:this.props.isForm?"submit":"button"},this.props.confirmBtnText)));return a.a.createElement(ee.a,{show:this.props.show,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,onHide:function(){return e.props.closeHandler(e.props)}},this.props.isForm?a.a.createElement("form",{onSubmit:function(t){return e.props.formSubmitHandler(t,e.props)}},t):t)}}]),t}(n.Component);re.defaultProps={show:!1,isForm:!1,titleText:"[TITLE]",bodyText:"[BODY]",closeBtnText:"[CLOSE]",confirmBtnText:"[CONFIRM]",closeBtnVariant:"secondary",confirmBtnVariant:"danger",closeHandler:function(e){e.hideModal()},confirmHandler:function(){},formSubmitHandler:function(e,t){e.preventDefault()}};var ne={hideModal:function(){return{type:"HIDE_MODAL"}}},ae=re=Object(i.b)(function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(r,!0).forEach(function(t){Object(y.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e.modalData,{currentFormValues:e.currentFormValues})},ne)(re),oe=r(68),ce=r.n(oe),ie=function(e){function t(){return Object(D.a)(this,t),Object(R.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){return a.a.createElement(ce.a,{variant:"danger"},"Something gone wrong: ",this.props.errorGlobalMsg)}}]),t}(n.Component),le=ie=Object(i.b)(function(e){return{errorGlobalMsg:e.errorGlobalMsg}},null)(ie),se=function(e){function t(){return Object(D.a)(this,t),Object(R.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){return a.a.createElement("span",null,a.a.createElement("h3",null,"Manage Articles"),a.a.createElement(P,null))}}]),t}(n.Component),ue=function(e){function t(){return Object(D.a)(this,t),Object(R.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){return a.a.createElement(x.a,null,a.a.createElement(w,null),this.props.errorGlobal&&a.a.createElement(le,null),a.a.createElement("div",{className:"container mt-3"},a.a.createElement(G.a,{path:"/",render:function(){return a.a.createElement("h3",null,"Welcome to recipes backend")},exact:!0}),a.a.createElement(G.a,{path:"/manage_categories/",component:X}),a.a.createElement(G.a,{path:"/manage_recipes/",component:Z}),a.a.createElement(G.a,{path:"/manage_articles/",component:se})),a.a.createElement(ae,this.props.modalData))}}]),t}(n.Component),pe=ue=Object(i.b)(function(e){return{errorGlobal:e.errorGlobal}},null)(ue),me=Object(b.a)(),de=Object(c.d)(C,Object(c.a)(me));me.run(O),Object(o.render)(a.a.createElement(i.a,{store:de},a.a.createElement(pe,null)),document.getElementById("root"))},70:function(e,t,r){e.exports=r(111)},81:function(e,t,r){}},[[70,1,2]]]);
//# sourceMappingURL=main.34599af0.chunk.js.map